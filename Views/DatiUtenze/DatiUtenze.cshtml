@{
    ViewData["Title"] = "DatiUtenze";
}
<link href="../assets/libs/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../assets/libs/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
<link href="../assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.css" rel="stylesheet">
<link href="../assets/extra-libs/jquery-steps/jquery.steps.css" rel="stylesheet">
<link href="../assets/extra-libs/jquery-steps/steps.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../dist/css/View_css/DatiGenerali.css">
<link rel="stylesheet" type="text/css" href="../assets/libs/bootstrap-switch/dist/css/bootstrap3/bootstrap-switch.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />


<style>
    #map {
        height: 600px;
        width: 100%;
    }
</style>
<div class="page-wrapper">
    <!-- ============================================================== -->
    <!-- Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <div class="page-breadcrumb">
        <div class="row">
            <div class="col-md-5 align-self-center">
                <h3 class="page-title">Dashboard</h3>
                <div class="d-flex align-items-center">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Simulazione</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Dati Utenze</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- End Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Container fluid  -->
    <!-- ============================================================== -->
    <div class="container-fluid">
        <ul class="nav nav-tabs mb-3">
            <li class="nav-item">
                <a href="#home" data-toggle="tab" aria-expanded="false" class="nav-link active">
                    <i class="mdi mdi-home-variant d-lg-none d-block mr-1"></i>
                    <span class="d-none d-lg-block">Consumer</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#profile" data-toggle="tab" aria-expanded="true"
                   class="nav-link">
                    <i class="mdi mdi-account-circle d-lg-none d-block mr-1"></i>
                    <span class="d-none d-lg-block">Prosumer</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#settings" data-toggle="tab" aria-expanded="false" class="nav-link">
                    <i class="mdi mdi-settings-outline d-lg-none d-block mr-1"></i>
                    <span class="d-none d-lg-block">Impianto di produzione</span>
                </a>
            </li>
        </ul>

        <div class="tab-content">
            
            <div class="tab-pane show active" id="home">
                
                <div class="card">
                   
                    <div class="card-body collapse show">
                        <div class="row">
                            <div class="col-12">
                                <button class="btn btn-success" style="float:right;width:100px" onclick="ShowPopupConsumer();"><i class="mdi"></i>Nuovo</button>
                            </div>
                            
                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table id="grd_Consumer" class="table table-striped table-bordered no-wrap">
                                    <thead>
                                        <tr>
                                            <th>Nome</th>
                                            <th>Forma dell'Utenza</th>
                                            <th>Tipologia Utenza</th>
                                            <th>Numero di Utenze</th>
                                            <th>Modalita Inserimento</th>                                            
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                    </tbody>

                                </table>
                            </div>
                            </div>

                        

                    </div>
                </div>
            </div>
            <div class="tab-pane" id="profile">
                <div class="card">

                    <div class="card-body collapse show">
                        <div class="row">
                            <div class="col-12">
                                <button class="btn btn-success" style="float:right;width:100px" onclick="ShowPopupProsumer()"><i class="mdi"></i>Nuovo</button>
                            </div>

                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table id="grd_Prosumer" class="table table-striped table-bordered no-wrap">
                                    <thead>
                                        <tr>
                                            <th>Nome</th>
                                            <th>Potenza Impianto</th>
                                            <th>Potenza Inverter</th>
                                            <th>Data Inizio</th>
                                            <th>Costo</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>

                                </table>
                            </div>
                        </div>



                    </div>
                </div>
            </div>
            <div class="tab-pane" id="settings">
                <div class="card">

                    <div class="card-body collapse show">
                        <div class="row">
                            <div class="col-12">
                                <button class="btn btn-success" style="float:right;width:100px" onclick="ShowPopupImpianto()"><i class="mdi"></i>Nuovo</button>
                            </div>

                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table id="grd_Impianto" class="table table-striped table-bordered no-wrap">
                                    <thead>
                                        <tr>
                                            <th>Nome</th>
                                            <th>Potenza Impianto</th>
                                            <th>Potenza Inverter</th>
                                            <th>Data Inizio</th>
                                            <th>Costo</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>

                                </table>
                            </div>
                        </div>



                    </div>
                </div>
            </div>
        </div>


        <!-- Row -->

        <div class="modal fade" tabindex="-1" role="dialog" id="centermodal_consumer" aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Seleziona la tipologia di utente</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <div class="row" id="Input_Consumer">
                            <div class="col-3">
                                <h4 class="card-title">Nome</h4>
                                <input class="form-control" type="text" name="nome_consumer" id="nome_consumer" />

                            </div>
                                <div class="col-3">
                                    <h4 class="card-title">Forma dell'Utenza</h4>
                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Forma_Utenza">
                                        <option value="">Seleziona</option>
                                        <option value="0">Privato</option>
                                        <option value="1">Azienda</option>
                                        <option value="2">Pubblico</option>

                                    </select>

                                </div>
                                <div class="col-3">

                                    <h4 class="card-title">Tipologia di Utenza</h4>

                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Utenza">

                                    </select>
                                </div>

                                <div class="col-3" id="col_cluster">

                                    <h4 class="card-title">N° utenze nel cluster</h4>
                                    <input type="number" id="n_utenze" class="form-control" value="1">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-3">
                                    <div class="form-group" style=" width: fit-content">
                                        <label for="inflazione">Modalità di inserimento dati di consumi</label>

                                        <select onchange="ShowCol()" class="select2 form-control custom-select select2-hidden-accessible" id="modalita_inserimento">
                                            <option value="">Seleziona</option>
                                            <option value="1">Consumo Annuale</option>
                                            <option value="2">Consumo Mensile</option>
                                            <option value="3">Curva Oraria</option>
                                        </select>

                                    </div>
                                </div>

                            <div class="col-3" id="div_annuale">
                                    <div class="form-group">
                                        <label " for="inflazione">Tasso di interesse del mercato</label>
                                        <div class="input-group mb-3">
                                            <input type="number" id="Consumo_Annuale" class="form-control" value="0">
                                            <div class="input-group-append">
                                                <span class="input-group-text">kWh</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            <div class="col-3" style="align-content: center;" id="div_mensile">
                                    <div class="form-group" >

                                        <button class="btn btn-success mt-3" onclick="ShowModal()" id="btn_mese"><i class="mdi mdi-table-add"></i>Inserisci Valori Mensili</button>

                                    </div>
                                </div>
                               <div class="col-3" style="align-content: center;" id="div_orario">
                                    <div class="form-group mt-3">
                                        <button style="float: left;" class="btn btn-success" onclick="ShowModal()" id="btn_start"><i class="mdi mdi-play-circle"></i> Scarica Template</button>
                                        <button style="float: right;" class="btn btn-success" onclick="ShowModal()" id="btn_start"><i class="mdi mdi-play-circle"></i> Carica</button>

                                    </div>
                                </div>




                            </div>



                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" onclick="sendMonthsValue()"><i class="mdi"></i>Salva</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>


        <div class="modal fade" tabindex="-1" role="dialog" id="centermodal_prosumer" aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Seleziona la tipologia di utente</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">

                        <div class="col-12">
                            <div class="card">
                                <div class="card-body wizard-content">
                                    <h4 class="card-title">Inserisci i Dati del Prosumer</h4>
                                    <h6 class="card-subtitle"></h6>
                                    <form action="#" class="tab-wizard wizard-circle">
                                        <!-- Step 1 -->
                                        <h6>Dati Generali</h6>
                                        <section>
                                            <div class="row" id="Input_Prosumer">
                                                <div class="col-3">
                                                    <h4 class="card-title">Nome</h4>
                                                    <input class="form-control" type="text" id="nome_prosumer" />

                                                </div>
                                                <div class="col-3">
                                                    <h4 class="card-title">Forma dell'Utenza</h4>
                                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Forma_Utenza_Prosumer">
                                                        <option value="">Seleziona</option>
                                                        <option value="pr">Privato</option>
                                                        <option value="az">Azienda</option>
                                                        <option value="pub">Pubblico</option>

                                                    </select>

                                                </div>
                                                <div class="col-3">

                                                    <h4 class="card-title">Tipologia di Utenza</h4>

                                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Utenza_Prosumer">
                                                        <option value="">Seleziona</option>
                                                        <option value="1">Residenziale</option>
                                                        <option value="2">Utenze condominiali</option>
                                                        <option value="3">Supermercato / alimentari</option>
                                                        <option value="4">Industria generica</option>
                                                        <option value="5">Ufficio</option>
                                                        <option value="6">Colonnine di ricarica</option>
                                                        <option value="99">Altro</option>
                                                    </select>
                                                </div>

                                                <div class="col-3" id="col_cluster_Prosumer">

                                                    <h4 class="card-title">N° utenze nel cluster</h4>
                                                    <input disabled type="number" id="n_utenze_Prosumer" class="form-control" value="1">
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-3">
                                                    <div class="form-group" style=" width: fit-content">
                                                        <label for="inflazione">Modalità di inserimento dati di consumi</label>

                                                        <select onchange="ShowColProsumer()" class="select2 form-control custom-select select2-hidden-accessible" id="modalita_inserimento_Prosumer">
                                                            <option value="">Seleziona</option>
                                                            <option value="1">Consumo Annuale</option>
                                                            <option value="2">Consumo Mensile</option>
                                                            <option value="3">Curva Oraria</option>
                                                        </select>

                                                    </div>
                                                </div>

                                                <div class="col-3" style="display:none" id="div_annuale_Prosumer">
                                                    <div class="form-group">
                                                        <label for="inflazione">Tasso di interesse del mercato</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="Consumo_Annuale_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kWh</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="col-3" style="display:none" style="align-content: center;" id="div_mensile_Prosumer">
                                                    <div class="form-group">

                                                        <button class="btn btn-success mt-3" onclick="ShowModal()" id="btn_mese_Prosumer"><i class="mdi mdi-table-add"></i>Inserisci Valori Mensili</button>

                                                    </div>
                                                </div>
                                                <div class="col-3" style="display:none" style="align-content: center;" id="div_orario_Prosumer">
                                                    <div class="form-group mt-3">
                                                        <button style="float: left;" class="btn btn-success" onclick="ShowModal()" id="btn_start_Prosumer"><i class="mdi mdi-play-circle"></i> Scarica Template</button>
                                                        <button style="float: right;" class="btn btn-success" onclick="ShowModal()" id="btn_start_Prosumer"><i class="mdi mdi-play-circle"></i> Carica</button>

                                                    </div>
                                                </div>




                                            </div>
                                        </section>
                                        <!-- Step 2 -->
                                        <h6>Dati dell'Impianto</h6>
                                        <section>
                                            <div class="row">
                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Longitudine</label>
                                                        <div class="input-group mb-3">
                                                            <input type="text" id="Longitudine_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">°</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Latitudine</label>
                                                        <div class="input-group mb-3">
                                                            <input type="text" id="Latitudine_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">°</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-2" style="align-content: end;">
                                                    <div class="form-group">
                                                        <button class="btn btn-success" onclick="ShowMap(0)" id="btn_map_Prosumer"><i class="mdi mdi-map"></i>Usa la mappa</button>
                                                        
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Potenza dell’impianto</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="Potenza_impianto_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kW</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div style="align-content: center" class="col-4">
                               
                                                        <div class="custom-control custom-checkbox" onchange="ShowRinnovabile_Prosumer()">
                                                            <input type="checkbox"  class="custom-control-input" id="customCheck1_Prosumer">
                                                        <label class="custom-control-label" for="customCheck1_Prosumer">Abilita Quota Potenza Rinnovabile</label>
                                                        </div>
                                              

                                                </div>
                                                <div id="div_rinnovabile_Prosumer" class="col-4">
                                                    <label for="inflazione">Quota di potenza rinnovabile</label>
                                                    <div class="input-group mb-3">
                                                        <input type="number" id="Potenza_rinnovabile_Prosumer" class="form-control" value="0">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">kW</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-3">

                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Potenza inverter</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="potenza_inverter_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kW</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Capacità batteria</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="capacita_batteria_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kWh</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>


                                            </div>
                                            <div class="row mt-3">


                                                <div class="col-3" style="align-content:center">

                                                    <div class=" ml-5 bootstrap-switch-mini bootstrap-switch bootstrap-switch-wrapper bootstrap-switch-animate bootstrap-switch-on" style="width: fit-content;">
                                                        <div class="bootstrap-switch-container" style="width: fit-content; margin-left: 0px;">
                                                            <input onchange="SwitchCosto_Prosumer()" checked data-size="normal" data-on-text="Costo al kW" data-off-text="Costo Totale" type="checkbox" id="mod_Prosumer">
                                                        </div>

                                                    </div>

                                                </div>
                                                <div id="divCostokW_Prosumer" class="col-3">
                                                    <div class="form-group">
                                                        <label for="inflazione">Costo al kW dell'impianto</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="costokw_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">€/kW</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div id="divCostoTot_Prosumer" class="col-3">
                                                    <div class="form-group">
                                                        <label for="inflazione">Costo totale dell'impianto</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="costotot_Prosumer" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">€</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-3" style="align-content:end">
                                                    <div class="form-group">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="checkTariffa_Prosumer">
                                                            <label class="custom-control-label" for="checkTariffa_Prosumer">Impianto escluso da tariffa premio</label>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row mt-3 mb-3">
                                                <div class="col-12">

                                                    <button style="float:right" class="btn btn-success" onclick="ShowDettaglio(0)"><i class="mdi mdi-plus-box"></i>Aggiungi dati facoltativi</button>
                                                </div>

                                            </div>
                                        </section>
                                        <!-- Step 3 -->
                                        <h6>Dati Economici</h6>
                                        <section>
                                            <div class="row">
                                                <div class="col-12">

                                                    <h4 class="card-title">Tipologia di Utenza</h4>

                                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Utenza_Prosumer">
                                                        <option value="">Seleziona</option>
                                                        <option value="1">Residenziale</option>
                                                        <option value="2">Utenze in bassa tensione per l'illuminazione pubblica</option>
                                                        <option value="3">Utenze in bassa tensione per ricarica veicoli pubblica</option>
                                                        <option value="4">Altre utenze in bassa tensione (fino a 16.5 kW)</option>
                                                        <option value="5">Altre utenze in bassa tensione (oltre 16.5 kW)</option>
                                                        <option value="6">Utenze in media tensione per illuminazione pubblica</option>
                                                        <option value="7">Altre utenze in media tensione (fino a 100 kW)</option>
                                                        <option value="8">Altre utenze in media tensione (100-500 kW)</option>
                                                        <option value="9">Altre utenze in media tensione (oltre 500 kW)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <label class="" for="">Modalità di vendita</label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-2">
                                                            <label class="" for="">RID</label>
                                                        </div>
                                                        <div class=" ml-3 col-2">
                                                            <label class="switch">
                                                                <input id="check_vendita_prosumer" onchange="SwitchCostoVenditaProsumer()" type="checkbox">
                                                                <span class="slider round" style="width: auto;height: auto;"></span>
                                                            </label>
                                                        </div>
                                                        <div class="col-2">
                                                            <label class="" for="">Libero</label>
                                                        </div>
                                                    
   

                                                        <div class="col-5" style="display: none;" id="Modalita_libera_prosumer">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <label for="PUN_F1">Prezzo F1</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F1_PRE_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Giu">Prezzo F2</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F2_PRE_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Lug">Prezzo F3</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F3_PRE_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <label class="" for="">Modalità di acquisto</label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-2">
                                                            <label class="" for="">Mercato</label>
                                                        </div>
                                                        <div class=" ml-3 col-2">
                                                            <label class="switch">
                                                                <input id="check_acquisto_prosumer" onchange="SwitchCostoAcquistoProsumer()" type="checkbox">
                                                                <span class="slider round" style="width: auto;height: auto;"></span>
                                                            </label>
                                                        </div>
                                                        <div class="col-2">
                                                            <label class="" for="">Libero</label>
                                                        </div>
                                                    

                                                        <div class="col-5" style="display: none;" id="Modalita_acquisto_prosumer">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <label for="PUN_F1">Costo F1</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F1_COSTO_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Giu">Costo F2</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F2_COSTO_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Lug">Costo F3</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F3_COSTO_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                <div class="row mt-3">

                                                    <div class="col-4">
                                                        <div class="form-group">
                                                            <label " for="inflazione">Altre spese di investimento</label>
                                                            <div class="input-group mb-3">
                                                                <input type="number" id="AltreSpeseInvestmentProsumer" class="form-control" value="0">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">€</span>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="col-4">
                                                        <div class="form-group">
                                                            <label " for="inflazione">Altre spese</label>
                                                            <div class="input-group mb-3">
                                                                <input type="number" id="AltreSpeseProsumer" class="form-control" value="0">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">€</span>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="col-4">
                                                        <div class="form-group">
                                                                <label " for="inflazione">Spese di manutenzione</label>
                                                            <div class="input-group mb-3">
                                                                <input type="number" id="AltreSpeseAnnoProsumer" class="form-control" value="0">
                                                                <div class="input-group-append">
                                                                    <span class="input-group-text">€/anno</span>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row mt-3">

                                                    <div class="col-2">
                                                        <div class="form-group">
                                                            <label " for="inflazione">Detrazione 50%</label>
                                                                <div class="input-group mb-3" style=" width: 20px;">
                                                                <input type="checkbox" id="DetrazioneProsumer" class="form-control">
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="col-2">
                                                            <div class="form-group">
                                                                <label for="inflazione">Finanziamento</label>
                                                                     <div class="input-group mb-3" style="width: 20px;">
                                                                        <input onchange="ShowHideFinanziamentoProsumer()" type="checkbox" id="CheckFinanziamentoProsumer" class="form-control">                           
                                                                     </div>

                                                            </div>
                                                     </div>

                                                        <div style="display: none;" class="col-6" id="divFinanziamentoProsumer">
                                                         
                                                        
                                                       
                                                            <div class="row">
                                                                <div class="input-group mb-3 col-6">
                                                                    <label for="inflazione">Importo Finanziamento</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="FinanziamentoProsumer" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="input-group mb-3 col-6">
                                                                    <label for="inflazione">Interesse finanziamento</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="IntersseFinanziamentoProsumer" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">%</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="input-group mb-3 col-6">
                                                                    <div class="form-group">
                                                                        <label for="inflazione">Conto capitale 40%</label>
                                                                        <div class="input-group mb-3" style="width: 20px;">
                                                                            <input onchange="ContoChangeProsumer()" type="checkbox" id="CheckContoProsumer" class="form-control">
                                                                        </div>
         

                                                                    </div>
                                                                    
                                                                </div>
                                                                <div class="col-6">
                                                                    <div id="divContoProsumer" style="display: none;" class="input-group mb-3">
                                                                        <input type="number" id="PercentFinanziamentoProsumer" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">%</span>
                                                                        </div>
                                                                    </div>
                                                                 </div>
                                                           

                                                        </div>
                                                    </div>

                                                </div>

                                                </div>

                                        </section>
                                        <!-- Step 4 -->

                                    </form>
                                </div>
                            </div>
                        </div>


                    </div>
                   
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>
        <div class="modal fade" tabindex="-1" role="dialog" id="centermodal_impianto" aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Seleziona la tipologia di utente</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">

                        <div class="col-12">
                            <div class="card">
                                <div class="card-body wizard-content">
                                    <h4 class="card-title">Inserisci i dati dell' Impianto</h4>
                                    <h6 class="card-subtitle"></h6>
                                    <form action="#" class="tab-wizard2 wizard-circle">
                                        <!-- Step 1 -->
                                        <h6>Dati Generali</h6>
                                        <section>
                                            <div class="row" id="Input_Impianto">
                                                <div class="col-3">
                                                    <h4 class="card-title">Nome</h4>
                                                    <input class="form-control" type="text" name="nome_impianto" id="nome_impianto" />

                                                </div>
                                                <div class="col-3">
                                                    <h4 class="card-title">Forma dell'Utenza</h4>
                                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Forma_Utenza_Impianto">
                                                        <option value="">Seleziona</option>
                                                        <option value="pr">Privato</option>
                                                        <option value="az">Azienda</option>
                                                        <option value="pub">Pubblico</option>

                                                    </select>

                                                </div>
                                                <div class="col-3">

                                                    <h4 class="card-title">Tipologia di Utenza</h4>

                                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Utenza_Impianto">
                                                        <option value="">Seleziona</option>
                                                        <option value="1">Residenziale</option>
                                                        <option value="2">Utenze condominiali</option>
                                                        <option value="3">Supermercato / alimentari</option>
                                                        <option value="4">Industria generica</option>
                                                        <option value="5">Ufficio</option>
                                                        <option value="6">Colonnine di ricarica</option>
                                                        <option value="99">Altro</option>
                                                    </select>
                                                </div>

                                                <div class="col-3" id="col_cluster_Impianto">

                                                    <h4 class="card-title">N° utenze nel cluster</h4>
                                                    <input disabled type="number" id="n_utenze_Impianto" class="form-control" value="1">
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-3">
                                                    <div class="form-group" style=" width: fit-content">
                                                        <label for="inflazione">Modalità di inserimento dati di consumi</label>

                                                        <select onchange="ShowColImpianto()" class="select2 form-control custom-select select2-hidden-accessible" id="modalita_inserimento_Impianto">
                                                            <option value="">Seleziona</option>
                                                            <option value="1">Consumo Annuale</option>
                                                            <option value="2">Consumo Mensile</option>
                                                            <option value="3">Curva Oraria</option>
                                                        </select>

                                                    </div>
                                                </div>

                                                <div class="col-3" style="display:none" id="div_annuale_Impianto">
                                                    <div class="form-group">
                                                        <label for="inflazione">Tasso di interesse del mercato</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="Consumo_Annuale_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kWh</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="col-3" style="display:none" style="align-content: center;" id="div_mensile_Impianto">
                                                    <div class="form-group">

                                                        <button class="btn btn-success mt-3" onclick="ShowModal()" id="btn_mese_Impianto"><i class="mdi mdi-table-add"></i>Inserisci Valori Mensili</button>

                                                    </div>
                                                </div>
                                                <div class="col-3" style="display:none" style="align-content: center;" id="div_orario_Impianto">
                                                    <div class="form-group mt-3">
                                                        <button style="float: left;" class="btn btn-success" onclick="ShowModal()" id="btn_start_Impianto"><i class="mdi mdi-play-circle"></i> Scarica Template</button>
                                                        <button style="float: right;" class="btn btn-success" onclick="ShowModal()" id="btn_start_Impianto"><i class="mdi mdi-play-circle"></i> Carica</button>

                                                    </div>
                                                </div>




                                            </div>
                                        </section>
                                        <!-- Step 2 -->
                                        <h6>Dati dell'Impianto</h6>
                                        <section>
                                            <div class="row">
                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Longitudine</label>
                                                        <div class="input-group mb-3">
                                                            <input type="text" id="Longitudine_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">°</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Latitudine</label>
                                                        <div class="input-group mb-3">
                                                            <input type="text" id="Latitudine_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">°</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-2" style="align-content: end;">
                                                    <div class="form-group">
                                                        <button class="btn btn-success" onclick="ShowMap(1)" id="btn_map_Imp"><i class="mdi mdi-map"></i>Usa la mappa</button>

                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-4">
                                                    <div class="form-group">
                                                        <label for="inflazione">Potenza dell’impianto</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="Potenza_impianto_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kW</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div style="align-content: center" class="col-4">
                                                    <div class="form-group">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" onchange="ShowRinnovabile_Impianto()" class="custom-control-input" id="customCheck1_Impianto">
                                                            <label class="custom-control-label" for="customCheck1_Impianto">Abilita Quota Potenza Rinnovabile</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="div_rinnovabile_Impianto" class="col-4">
                                                    <label for="inflazione">Quota di potenza rinnovabile</label>
                                                    <div class="input-group mb-3">
                                                        <input type="number" id="Potenza_rinnovabile_Impianto" class="form-control" value="0">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">kW</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            
                                            <div class="row mt-3">
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <label for="inflazione">Potenza inverter</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="potenza_inverter_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kW</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="form-group">
                                                        <label for="inflazione">Capacità batteria</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="capacita_batteria_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">kWh</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>


                                            </div>

                                            <div class="row mt-3">
                                                <div class="col-3" style="align-content:center">

                                                    <div class=" ml-5 bootstrap-switch-mini bootstrap-switch bootstrap-switch-wrapper bootstrap-switch-animate bootstrap-switch-on" style="width: fit-content;">
                                                        <div class="bootstrap-switch-container" style="width: fit-content; margin-left: 0px;">
                                                            <input onchange="SwitchCosto_Impianto()" checked data-size="normal" data-on-text="Costo al kW" data-off-text="Costo Totale" type="checkbox" id="mod_Impianto">
                                                        </div>

                                                    </div>

                                                </div>
                                                <div id="divCostokW_Impianto" class="col-3">
                                                    <div class="form-group">
                                                        <label for="inflazione">Costo al kW dell'impianto</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="costokw_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">€/kW</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div id="divCostoTot_Impianto" class="col-3">
                                                    <div class="form-group">
                                                        <label for="inflazione">Costo totale dell'impianto</label>
                                                        <div class="input-group mb-3">
                                                            <input type="number" id="costotot_Impianto" class="form-control" value="0">
                                                            <div class="input-group-append">
                                                                <span class="input-group-text">€</span>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-3" style="align-content:end">
                                                    <div class="form-group">
                                                        <div class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" id="checkTariffa_Impianto">
                                                            <label class="custom-control-label" for="checkTariffa_Impianto">Impianto escluso da tariffa premio</label>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="row mt-3 mb-3">
                                                <div class="col-12">

                                                    <button style="float:right" class="btn btn-success" onclick="ShowDettaglio(1)"><i class="mdi mdi-plus-box"></i>Aggiungi dati facoltativi</button>
                                                </div>

                                            </div>
                                        </section>
                                        <!-- Step 3 -->
                                        <h6>Dati Economici</h6>
                                        <section>
                                            <div class="row">
                                                <div class="col-12">

                                                    <h4 class="card-title">Tipologia di Utenza</h4>

                                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Utenza_Impianto">
                                                        <option value="">Seleziona</option>
                                                        <option value="1">Residenziale</option>
                                                        <option value="2">Utenze in bassa tensione per l'illuminazione pubblica</option>
                                                        <option value="3">Utenze in bassa tensione per ricarica veicoli pubblica</option>
                                                        <option value="4">Altre utenze in bassa tensione (fino a 16.5 kW)</option>
                                                        <option value="5">Altre utenze in bassa tensione (oltre 16.5 kW)</option>
                                                        <option value="6">Utenze in media tensione per illuminazione pubblica</option>
                                                        <option value="7">Altre utenze in media tensione (fino a 100 kW)</option>
                                                        <option value="8">Altre utenze in media tensione (100-500 kW)</option>
                                                        <option value="9">Altre utenze in media tensione (oltre 500 kW)</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <label class="" for="">Modalità di vendita</label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-2">
                                                            <label class="" for="">RID</label>
                                                        </div>
                                                        <div class=" ml-3 col-2">
                                                            <label class="switch">
                                                                <input id="check_vendita_impianto" onchange="SwitchCostoVenditaImpianto()" type="checkbox">
                                                                <span class="slider round" style="width: auto;height: auto;"></span>
                                                            </label>
                                                        </div>
                                                        <div class="col-2">
                                                            <label class="" for="">Libero</label>
                                                        </div>



                                                        <div class="col-5" style="display: none;" id="Modalita_libera_impianto">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <label for="PUN_F1">Prezzo F1</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F1_PRE_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Giu">Prezzo F2</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F2_PRE_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Lug">Prezzo F3</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F3_PRE_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <label class="" for="">Modalità di acquisto</label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-2">
                                                            <label class="" for="">Mercato</label>
                                                        </div>
                                                        <div class=" ml-3 col-2">
                                                            <label class="switch">
                                                                <input id="check_acquisto_impianto" onchange="SwitchCostoAcquistoImpianto()" type="checkbox">
                                                                <span class="slider round" style="width: auto;height: auto;"></span>
                                                            </label>
                                                        </div>
                                                        <div class="col-2">
                                                            <label class="" for="">Libero</label>
                                                        </div>


                                                        <div class="col-5" style="display: none;" id="Modalita_acquisto_impianto">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <label for="PUN_F1">Costo F1</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F1_COSTO_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Giu">Costo F2</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F2_COSTO_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <label for="Consumo_Lug">Costo F3</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="PUN_F3_COSTO_PRO" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€/kWh</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="row mt-3">

                                                        <div class="col-4">
                                                            <div class="form-group">
                                                                <label " for="inflazione">Altre spese di investimento</label>
                                                                <div class="input-group mb-3">
                                                                    <input type="number" id="AltreSpeseInvestmentImpianto" class="form-control" value="0">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">€</span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-4">
                                                            <div class="form-group">
                                                                <label " for="inflazione">Altre spese</label>
                                                                <div class="input-group mb-3">
                                                                    <input type="number" id="AltreSpeseImpianto" class="form-control" value="0">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">€</span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="col-4">
                                                            <div class="form-group">
                                                                <label " for="inflazione">Spese di manutenzione</label>
                                                                <div class="input-group mb-3">
                                                                    <input type="number" id="AltreSpeseAnnoImpianto" class="form-control" value="0">
                                                                    <div class="input-group-append">
                                                                        <span class="input-group-text">€/anno</span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row mt-3">

                                                        <div class="col-2">
                                                            <div class="form-group">
                                                                <label " for="inflazione">Detrazione 50%</label>
                                                                <div class="input-group mb-3" style=" width: 20px;">
                                                                    <input type="checkbox" id="DetrazioneImpianto" class="form-control">
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-2">
                                                            <div class="form-group">
                                                                <label for="inflazione">Finanziamento</label>
                                                                <div class="input-group mb-3" style="width: 20px;">
                                                                    <input onchange="ShowHideFinanziamentoImpianto()" type="checkbox" id="CheckFinanziamentoImpianto" class="form-control">
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div style="display: none;" class="col-6" id="divFinanziamentoImpianto">



                                                            <div class="row">
                                                                <div class="input-group mb-3 col-6">
                                                                    <label for="inflazione">Importo Finanziamento</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="FinanziamentoImpianto" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">€</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="input-group mb-3 col-6">
                                                                    <label for="inflazione">Interesse finanziamento</label>
                                                                    <div class="input-group mb-3">
                                                                        <input type="number" id="IntersseFinanziamentoImpianto" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">%</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="input-group mb-3 col-6">
                                                                    <div class="form-group">
                                                                        <label for="inflazione">Conto capitale 40%</label>
                                                                        <div class="input-group mb-3" style="width: 20px;">
                                                                            <input onchange="ContoChangeImpianto()" type="checkbox" id="CheckContoImpianto" class="form-control">
                                                                        </div>


                                                                    </div>

                                                                </div>
                                                                <div class="col-6">
                                                                    <div id="divContoImpianto" style="display: none;" class="input-group mb-3">
                                                                        <input type="number" id="PercentFinanziamentoImpianto" class="form-control" value="0">
                                                                        <div class="input-group-append">
                                                                            <span class="input-group-text">%</span>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>

                                        </section>
                                        <!-- Step 4 -->

                                    </form>
                                </div>
                            </div>
                        </div>


                    </div>

                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>

        <div class="modal fade" tabindex="-1" role="dialog" id="centermodalmap_prosumer" aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Seleziona il punto sulla mappa</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">

                        <div id="map"></div>



                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" onclick="InsertValues()"><i class="mdi"></i>Salva</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>

        <div class="modal fade" tabindex="-1" role="dialog" id="approfondimento_prosumer" aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Aggiungi i dettagli del prosumer</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">

                        <div class="row mt-3">

                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Area Impianto</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="Area_Impianto_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">m²</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">
                                        Tipologia di Impianto
                                    </label>
                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Impianto_Prosumer">
                                        <option value="">Seleziona</option>
                                        <option value="1">Fisso</option>
                                        <option value="2">Inseguimento a doppio asse</option>
                                        <option value="3">Asse verticale</option>
                                        <option value="3">Asse inclinato</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Data di entrata in esercizio</label>
                                    <div class="input-group mb-3">
                                        <input type="date" id="data_potenza_inverter_Prosumer" class="form-control pickadate " value="0">

                                    </div>

                                </div>
                            </div>
                            <div style="align-content: center" class="col-3">
                                <div onchange="ShowSezione2_Prosumer()" class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="customCheck2_Prosumer">
                                    <label class="custom-control-label" for="customCheck2_Prosumer">Abilita Seconda Falda</label>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Potenza sezione</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="Potenza_sezione1_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">kW</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di tilt (min 0°, max 90°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="90" min="0" id="angolo_di_tilt1_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di azimut (min -180°, max 180°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="180" min="-180" id="angolo_di_azimut1_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div id="sezione2_Prosumer" class="row mt-3">
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Potenza sezione 2</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="Potenza_sezione2_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">kW</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di tilt 2 (min 0°, max 90°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="90" min="0" id="angolo_di_tilt2_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di azimut 2 (min -180°, max 180°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="180" min="-180" id="angolo_di_azimut2_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>


                        </div>

                        <div class="row mt-3">
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Efficienza del pannello</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="efficienzapannello_Prosumer" class="form-control" value="0">
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Coefficiente di temperatura </label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="coef_temp_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">%/K</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">NOCT</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="noct_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°C</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Fattore di riduzione annuo delle prestazioni</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="prestazioni_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                        <div class="row mt-3">
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Efficienza inverter</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="efficienzainverter_Prosumer" class="form-control" value="0">
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Costo ricambio batteria</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="costo_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">€</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Altre Perdite</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="perdite_Prosumer" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" onclick=""><i class="mdi"></i>Salva</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>

        <div class="modal fade" tabindex="-1" role="dialog" id="approfondimento_impianto" aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Aggiungi i dettagli dell'Impianto</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <div class="row mt-3">

                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Area Impianto</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="Area_Impianto_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">m²</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">
                                        Tipologia di Impianto
                                    </label>
                                    <select class="select2 form-control custom-select select2-hidden-accessible" id="Tipo_Impianto_Impianto">
                                        <option value="">Seleziona</option>
                                        <option value="1">Fisso</option>
                                        <option value="2">Inseguimento a doppio asse</option>
                                        <option value="3">Asse verticale</option>
                                        <option value="3">Asse inclinato</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Data di entrata in esercizio</label>
                                    <div class="input-group mb-3">
                                        <input type="date" id="data_potenza_inverter_Impianto" class="form-control pickadate " value="0">

                                    </div>

                                </div>
                            </div>
                            <div style="align-content: center" class="col-3">
                                <div onchange="ShowSezione2_Impianto()" class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="customCheck2_Impianto">
                                    <label class="custom-control-label" for="customCheck2_Impianto">Abilita Seconda Falda</label>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Potenza sezione</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="Potenza_sezione1_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">kW</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di tilt (min 0°, max 90°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="90" min="0" id="angolo_di_tilt1_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di azimut (min -180°, max 180°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="180" min="-180" id="angolo_di_azimut1_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div id="sezione2_Impianto" class="row mt-3">
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Potenza sezione 2</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="Potenza_sezione2_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">kW</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di tilt 2 (min 0°, max 90°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="90" min="0" id="angolo_di_tilt2_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="inflazione">Angolo di azimut 2 (min -180°, max 180°)</label>
                                    <div class="input-group mb-3">
                                        <input type="number" max="180" min="-180" id="angolo_di_azimut2_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°</span>
                                        </div>
                                    </div>

                                </div>
                            </div>


                        </div>

                        <div class="row mt-3">
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Efficienza del pannello</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="efficienzapannello_Impianto" class="form-control" value="0">
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Coefficiente di temperatura </label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="coef_temp_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">%/K</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">NOCT</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="noct_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">°C</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Fattore di riduzione annuo delle prestazioni</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="prestazioni_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                        <div class="row mt-3">
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Efficienza inverter</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="efficienzainverter_Impianto" class="form-control" value="0">
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Costo ricambio batteria</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="costo_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">€</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <label for="inflazione">Altre Perdite</label>
                                    <div class="input-group mb-3">
                                        <input type="number" id="perdite_Impianto" class="form-control" value="0">
                                        <div class="input-group-append">
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" onclick=""><i class="mdi"></i>Salva</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>







        <div class="modal fade" tabindex="-1" role="dialog" id="centermodal" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header d-flex align-items-center">
                        <h4 class="modal-title" id="myCenterModalLabel">Seleziona la tipologia di utente</h4>
                        <button type="button" class="close ml-auto" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-3">
                                <label for="Consumo_Genn">Gennaio</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Genn" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Feb">Febbraio</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Feb" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Marzo">Marzo</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Marzo" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Apr">Aprile</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Apr" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <label for="Consumo_Maggio">Maggio</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Maggio" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Giu">Giugno</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Giu" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Lug">Luglio</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Lug" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Ago">Agosto</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Ago" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <label for="Consumo_Set">Settembre</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Set" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Ott">Ottobre</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Ott" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Nov">Novembre</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Nov" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-3">
                                <label for="Consumo_Dic">Dicembre</label>
                                <div class="input-group mb-3">
                                    <input type="number" id="Consumo_Dic" class="form-control" value="0">
                                    <div class="input-group-append">
                                        <span class="input-group-text">kWh</span>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" onclick="sendMonthsValue()"><i class="mdi"></i>Avanti</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>

    </div>
    <!-- ============================================================== -->
    <!-- End Container fluid  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
    <footer class="footer">
        © 2024
    </footer>
    <!-- ============================================================== -->
    <script src="../src/assets/libs/moment/moment.js"></script>
    <script src="../src/assets/libs/daterangepicker/daterangepicker.js"></script>

    <script src="../src/assets/libs/sweetalert2/dist/sweetalert2.all.js"></script>

    <!-- Bootstrap tether Core JavaScript -->
    <script src="../src/assets/libs/popper.js/dist/umd/popper.min.js"></script>
    <script src="../src/assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- apps -->
    <script src="../dist/js/app.min.js"></script>
    <script src="../dist/js/app.init.js"></script>
    <script src="../dist/js/app-style-switcher.js"></script>
    <!-- slimscrollbar scrollbar JavaScript -->
    <script src="../src/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js"></script>
    <script src="../src/assets/libs/jquery-sparkline/jquery.sparkline.min.js"></script>
    <!--Wave Effects -->
    <script src="../dist/js/waves.js"></script>
    <!--Menu sidebar -->
    <script src="../dist/js/sidebarmenu.js"></script>
    <!--Custom JavaScript -->
    <script src="../dist/js/feather.min.js"></script>
    <script src="../dist/js/custom.min.js"></script>
    <script src="../src/assets/libs/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="../src/assets/extra-libs/toastr/dist/build/toastr.min.js"></script>
    <script src="../dist/js/pages/datatable/custom-datatable.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.flash.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.js"> </script>
    <script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.print.js"></script> <!--btn btn-info mb-3 -->
    <script src="https://cdn.datatables.net/plug-ins/1.10.21/sorting/custom-data-source/dom-checkbox.js"></script>
    <script src="../src/assets/libs/sweetalert2/dist/sweetalert2.all.js"></script>
    <script src="../src/assets/extra-libs/prism/prism.js"></script>
    <script src="../src/assets/libs/moment/moment.js"></script>
    <script src="../src/assets/libs/daterangepicker/daterangepicker.js"></script>
    <script src="../src/assets/libs/bootstrap-datepicker/dist/js/bootstrap-datepicker.js"></script>
    <script src="../src/assets/libs/jquery-steps/build/jquery.steps.min.js"></script>
    <script src="../src/assets/libs/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="../../dist/js/app-style-switcher.js"></script>
    <script src="../src/assets/libs/bootstrap-switch/dist/js/bootstrap-switch.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="../dist/js/app-style-switcher.horizontal.js"></script>
    <script src="../../dist/js/Microd/dati_utenze.js"></script>

    <!-- My Js File-->
    <!-- <script src="../dist/js/DashboardJs/dashboard.js"></script> -->
    <!-- ============================================================== -->
    <!-- End footer -->
    <!-- ============================================================== -->
</div>